{
  "tasks": {
    "[Init] Pull code from git": {
      "schedule": "*/15 * * * *",
      "run_on_load": true,
      "bash_script": [
        "node -v",
        "[ ! -d 'repo' ] && git clone  --depth 1 https://github.com/DefiLlama/defillama-server repo",
        "[ ! -d 'runner' ] && git clone  --depth 1 https://github.com/DefiLlama/task-runner runner",
        "cd runner",
        "git pull",
        "cd ../repo/defi",
        "git stash",
        "git pull",
        "git submodule update --init --recursive",
        "git submodule update --remote --merge",
        "cd DefiLlama-Adapters",
        "git checkout main",
        "git pull",
        "cd ..",
        "npm i",
        "npm update @defillama/sdk",
        "npm i @types/aws-lambda",
        "echo '-------ls node_modules-----' && ls node_modules && echo '-------done-----'",
        "echo '-------ls @types-----' && ls node_modules/@types && echo '-------done-----'",
        "cd DefiLlama-Adapters",
        "git checkout main",
        "git pull",
        "cd ..",
        "npm run cache-config",
        "echo '-------ls @types-----' && ls node_modules/@types && echo '-------done-----'",
        "pwd && echo '--------checking if dev module is installed----------' && npm ls @types/aws-lambda",
        "node -v"
      ]
    },
    "Start api server": {
      "run_on_load": true,
      "schedule": "59 * * * *",
      "npm_script": "api2-start-server",
      "script_location": "defi"
    }
  }
}